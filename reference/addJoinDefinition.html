<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Expand a CompDb database with additional, related tables — addJoinDefinition • CompoundDb</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expand a CompDb database with additional, related tables — addJoinDefinition"><meta name="description" content='The CompDb object uses a simple relational database model that consists of
the following database tables, some of which are optional:
ms_compound: annotation(s) of compounds.
metadata: general metadata information on the database. This database
table is not related to any other table in the database and its
content is thus also not joined with other database tables.
synonym (optional): database table containing optional additional
synonym(s) for compounds in the ms_compound table. Rows in this table
are linked to a row in ms_compound through the "compound_id" database
table column.
msms_spectrum (optional): database table with information on individual
mass spectra (each row containing the metadata for one spectrum). Database
table column "compound_id" links entries in this database table to a
single row in the ms_compound table.
msms_spectrum_peak (otional): database table containing mass peak data.
Each row in this table is related to one row in the msms_spectrum table
(through the "spectrum_id" column present in both tables).


In addition, the CompDb database layout can be extended by adding
additional tables. To make their content automatically available through
the built-in compounds() or Spectra() functions, the
information on how to combine/join these tables with the existing ones
needs to be provided.
This can be done using the addJoinDefinition() function: the relationship
of a new table with one of the existing tables can be defined with
this function providing the names of the two database tables as well as the
names of the columns containing the primary/foreign keys defining the
the relationship.
See the section Extending CompDb databases in the Creating
CompoundDb annotation resources package vignette for a detailed example.'><meta property="og:description" content='The CompDb object uses a simple relational database model that consists of
the following database tables, some of which are optional:
ms_compound: annotation(s) of compounds.
metadata: general metadata information on the database. This database
table is not related to any other table in the database and its
content is thus also not joined with other database tables.
synonym (optional): database table containing optional additional
synonym(s) for compounds in the ms_compound table. Rows in this table
are linked to a row in ms_compound through the "compound_id" database
table column.
msms_spectrum (optional): database table with information on individual
mass spectra (each row containing the metadata for one spectrum). Database
table column "compound_id" links entries in this database table to a
single row in the ms_compound table.
msms_spectrum_peak (otional): database table containing mass peak data.
Each row in this table is related to one row in the msms_spectrum table
(through the "spectrum_id" column present in both tables).


In addition, the CompDb database layout can be extended by adding
additional tables. To make their content automatically available through
the built-in compounds() or Spectra() functions, the
information on how to combine/join these tables with the existing ones
needs to be provided.
This can be done using the addJoinDefinition() function: the relationship
of a new table with one of the existing tables can be defined with
this function providing the names of the two database tables as well as the
names of the columns containing the primary/foreign keys defining the
the relationship.
See the section Extending CompDb databases in the Creating
CompoundDb annotation resources package vignette for a detailed example.'><meta property="og:image" content="https://rformassspectrometry.github.io/CompoundDb/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CompoundDb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.15.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/CompoundDb-usage.html">Usage of Annotation Resources with the CompoundDb Package</a></li>
    <li><a class="dropdown-item" href="../articles/create-compounddb.html">Creating CompoundDb annotation resources</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/CompoundDb/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Expand a CompDb database with additional, related tables</h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/CompoundDb/blob/main/R/CompDb.R" class="external-link"><code>R/CompDb.R</code></a></small>
      <div class="d-none name"><code>addJoinDefinition.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>CompDb</code> object uses a simple relational database model that consists of
the following database tables, some of which are optional:</p><ul><li><p><em>ms_compound</em>: annotation(s) of compounds.</p></li>
<li><p><em>metadata</em>: general metadata information on the database. This database
table is <strong>not</strong> related to any other table in the database and its
content is thus also not joined with other database tables.</p></li>
<li><p><em>synonym</em> (optional): database table containing optional additional
synonym(s) for compounds in the <em>ms_compound</em> table. Rows in this table
are linked to a row in <em>ms_compound</em> through the <code>"compound_id"</code> database
table column.</p></li>
<li><p><em>msms_spectrum</em> (optional): database table with information on individual
mass spectra (each row containing the metadata for one spectrum). Database
table column <code>"compound_id"</code> links entries in this database table to a
single row in the <em>ms_compound</em> table.</p></li>
<li><p><em>msms_spectrum_peak</em> (otional): database table containing mass peak data.
Each row in this table is related to one row in the <em>msms_spectrum</em> table
(through the <code>"spectrum_id"</code> column present in both tables).</p></li>
</ul><p>In addition, the <code>CompDb</code> database layout can be extended by adding
additional tables. To make their content automatically available through
the built-in <code><a href="CompDb.html">compounds()</a></code> or <code><a href="https://rdrr.io/pkg/Spectra/man/Spectra.html" class="external-link">Spectra()</a></code> functions, the
information on how to combine/join these tables with the existing ones
needs to be provided.
This can be done using the <code>addJoinDefinition()</code> function: the relationship
of a new table with one of the existing tables can be defined with
this function providing the names of the two database tables as well as the
names of the columns containing the primary/foreign keys defining the
the relationship.</p>
<p>See the section <em>Extending CompDb databases</em> in the <em>Creating
CompoundDb annotation resources</em> package vignette for a detailed example.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">addJoinDefinition</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  table_a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  table_b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  column_a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  column_b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  join <span class="op">=</span> <span class="st">"left outer join"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>CompDb</code> to which the join definition should be added.</p></dd>


<dt id="arg-table-a">table_a<a class="anchor" aria-label="anchor" href="#arg-table-a"></a></dt>
<dd><p><code>character(1)</code> with the name of one of the two tables that
are related to each other (and can be joined).</p></dd>


<dt id="arg-table-b">table_b<a class="anchor" aria-label="anchor" href="#arg-table-b"></a></dt>
<dd><p><code>character(1)</code> with the name of the second of the two tables
that are related to each other (and can be joined).</p></dd>


<dt id="arg-column-a">column_a<a class="anchor" aria-label="anchor" href="#arg-column-a"></a></dt>
<dd><p><code>character(1)</code> with the name of the column in <code>table_a</code>
containing the keys for the relationship to table <code>table_b</code>.</p></dd>


<dt id="arg-column-b">column_b<a class="anchor" aria-label="anchor" href="#arg-column-b"></a></dt>
<dd><p><code>character(1)</code> with the name of the column in <code>table_b</code>
containing the keys for the relationship to table <code>table_a</code>.</p></dd>


<dt id="arg-join">join<a class="anchor" aria-label="anchor" href="#arg-join"></a></dt>
<dd><p><code>character(1)</code> with the type of join. Defaults to
<code>join = "left outer join"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input <code>CompDb</code> with tha added information on how to join the
respective database tables.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Rainer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## The pre-defined table join definitions:</span></span></span>
<span class="r-in"><span><span class="fu">CompoundDb</span><span class="fu">:::</span><span class="va">.JOINS</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1]            [,2]                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "ms_compound"   "synonym"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "ms_ion"        "ms_compound"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] "ms_compound"   "msms_spectrum"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] "ms_ion"        "msms_spectrum"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] "msms_spectrum" "synonym"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] "msms_spectrum" "msms_spectrum_peak"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,3]                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "on (ms_compound.compound_id=synonym.compound_id)"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "on (ms_ion.compound_id=ms_compound.compound_id)"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] "on (ms_compound.compound_id=msms_spectrum.compound_id)"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] "on (ms_ion.compound_id=msms_spectrum.compound_id)"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] "on (msms_spectrum.compound_id=synonym.compound_id)"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] "on (msms_spectrum.spectrum_id=msms_spectrum_peak.spectrum_id)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,4]             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] "left outer join"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] "left outer join"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] "left outer join"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] "left outer join"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] "left outer join"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] "left outer join"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## See section "Extending CompDb databases" in the *Creating CompoundDb</span></span></span>
<span class="r-in"><span><span class="co">## annotation resources* package vignette for examples</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jan Stanstrup, Johannes Rainer, Roger Gine, Andrea Vicini.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.9000.</p>
</div>

    </footer></div>





  </body></html>

